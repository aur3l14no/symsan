// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/debian
{
	"name": "dev",
    // ! use host abspath because we are using host docker
	// normally it should be `$PWD` replaced using `s@/data@/data/students/<your_name>/container_01`
	// if you have any questions, ask me :)
	"workspaceMount": "source=/data/students/yumuzhi/container_01/SE/symbolic-execution/${localWorkspaceFolderBasename},target=/workspace/${localWorkspaceFolderBasename},type=bind",
	"workspaceFolder": "/workspace/${localWorkspaceFolderBasename}",
    // ! build with proxy
	"image": "${localWorkspaceFolderBasename}-dev-ymz",
	"initializeCommand": [
		"docker",
		"build",
		"--network=host",
		"--build-arg",
		"http_proxy=http://127.0.0.1:7890",
		"--build-arg",
		"https_proxy=http://127.0.0.1:7890",
		"--build-arg",
		"all_proxy=socks5h://127.0.0.1:7890",
		"--tag=${localWorkspaceFolderBasename}-dev-ymz",
		".devcontainer"
	],
	// "build": {
	// 	// Path is relataive to the devcontainer.json file.
	// 	"dockerfile": "Dockerfile"
	// },
	"runArgs": [
		"--platform",
		"linux/amd64",
		"--network=host"
	],
	"containerEnv": {
		"HTTP_PROXY": "http://127.0.0.1:7890",
		"HTTPS_PROXY": "http://127.0.0.1:7890",
		"ALL_PROXY": "socks5h://127.0.0.1:7890",
		"http_proxy": "http://127.0.0.1:7890",
		"https_proxy": "http://127.0.0.1:7890",
		"all_proxy": "socks5h://127.0.0.1:7890"
	},
	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	// "forwardPorts": [],
	// Configure tool-specific properties.
	// "customizations": {},
	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "root"
}
